/* =============================================================================
  /styles/animations.css — Motion Pack (Premium HUD / Light)
  - Keeps existing class hooks and behavior
  - Upgrades easing, timing, and visual finesse
  - Includes confetti + swipe helpers as in original (for compatibility)
============================================================================= */

/* =============================================================================
  Respect reduced motion (keep your strict rule)
============================================================================= */
@media (prefers-reduced-motion: reduce){
  *{
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto !important;
  }
}

/* =========================
   Item entrance (stagger)
   NOTE: If JS re-renders the list often, this can feel "too much".
   We keep it but soften it and reduce scale wobble.
========================= */
.item{
  animation: itemIn 420ms var(--easeOut, cubic-bezier(.16,1,.3,1)) both;
  transform-origin: 50% 20%;
}

@keyframes itemIn{
  from{
    opacity: 0;
    transform: translateY(10px) scale(.985);
    filter: blur(.2px);
  }
  to{
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}

/* =========================
   Mark done pop (celebration micro)
========================= */
.item.popIt{
  animation: popDone 520ms var(--easeSnap, cubic-bezier(.2,.9,.2,1));
}

@keyframes popDone{
  0%   { transform: translateY(0) scale(1); }
  40%  { transform: translateY(-1px) scale(1.012); }
  100% { transform: translateY(0) scale(1); }
}

/* Tiny bubble pulse (less cartoony, more tactile) */
.item.done .bubble{
  animation: bubblePulse 420ms var(--easeOut, cubic-bezier(.16,1,.3,1));
}

@keyframes bubblePulse{
  0%   { transform: scale(1); }
  55%  { transform: scale(1.08); }
  100% { transform: scale(1); }
}

/* =========================
   Shake (modal error) — premium
   Less violent, more "nope".
========================= */
.shake{
  animation: shake 420ms var(--easeInOut, cubic-bezier(.65,0,.35,1));
}

@keyframes shake{
  0%   { transform: translateX(0); }
  18%  { transform: translateX(-7px); }
  36%  { transform: translateX(7px); }
  52%  { transform: translateX(-5px); }
  68%  { transform: translateX(5px); }
  84%  { transform: translateX(-3px); }
  100% { transform: translateX(0); }
}

/* =========================
   Progress glow on complete
   Uses existing .progressBar.glow class hook.
========================= */
.progressBar.glow{
  animation: glowPulse 900ms var(--easeOut, cubic-bezier(.16,1,.3,1));
}

@keyframes glowPulse{
  0%   { box-shadow: 0 0 0 rgba(12,65,196,0); }
  35%  { box-shadow: 0 0 22px rgba(12,65,196,.26); }
  60%  { box-shadow: 0 0 34px rgba(206,0,113,.14); }
  100% { box-shadow: 0 0 0 rgba(12,65,196,0); }
}

/* Optional: specular sweep on progress when glowing */
.progressBar.glow::after{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius: inherit;
  background: linear-gradient(110deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,.38) 22%,
    rgba(255,255,255,0) 44%);
  transform: translateX(-65%) skewX(-12deg);
  opacity: 0;
  pointer-events:none;
  animation: sheenSweep 900ms var(--easeOut, cubic-bezier(.16,1,.3,1)) both;
}

@keyframes sheenSweep{
  0%   { transform: translateX(-65%) skewX(-12deg); opacity: 0; }
  18%  { opacity: .36; }
  55%  { opacity: .18; }
  100% { transform: translateX(65%) skewX(-12deg); opacity: 0; }
}

/* =========================
   Toast slide up (keep your transitions)
========================= */
.toast{
  transform: translateY(18px);
  opacity: 0;
  pointer-events: none;
  transition: transform var(--dur2, 180ms) var(--easeOut, cubic-bezier(.16,1,.3,1)),
              opacity   var(--dur2, 180ms) var(--easeOut, cubic-bezier(.16,1,.3,1));
}

.toast.show{
  transform: translateY(0);
  opacity: 1;
}

/* =========================
   Modal animation (sheet)
========================= */
.modalOverlay{
  opacity: 0;
  pointer-events: none;
  transition: opacity 200ms var(--easeOut, cubic-bezier(.16,1,.3,1));
}

.modalOverlay.show{
  opacity: 1;
  pointer-events: auto;
}

.modal{
  transform: translateY(14px) scale(.985);
  opacity: .92;
  transition: transform 220ms var(--easeOut, cubic-bezier(.16,1,.3,1)),
              opacity   220ms var(--easeOut, cubic-bezier(.16,1,.3,1));
}

.modalOverlay.show .modal{
  transform: translateY(0) scale(1);
  opacity: 1;
}

/* =========================
   Button micro bounce
   (Keep your existing behavior, but use nicer easing)
========================= */
.btn:active{
  transform: translateY(1px) scale(.99);
  transition: transform 120ms var(--easeSnap, cubic-bezier(.2,.9,.2,1));
}

/* =========================
   Ripple (optional class)
   This is separate from .fxRipple (components.css).
   Keep, but make it specular and less flat.
========================= */
.ripple{
  position: relative;
  overflow: hidden;
}

.ripple::after{
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at var(--rx,50%) var(--ry,50%),
      rgba(255,255,255,.42),
      rgba(255,255,255,.14) 20%,
      transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,0) 55%);
  opacity: 0;
  transform: scale(1.15);
  transition: opacity 420ms var(--easeOut, cubic-bezier(.16,1,.3,1));
  mix-blend-mode: screen;
}

.ripple.rippling::after{
  opacity: 1;
}

/* =========================
   Confetti layer (from fx.js)
   Keep classes, upgrade feel: lighter, floaty, less "rectangles".
========================= */
.confettiLayer{
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 9999;
}

.confetto{
  position: absolute;
  width: 10px;
  height: 14px;
  border-radius: 4px;
  opacity: .95;
  filter: drop-shadow(0 8px 14px rgba(0,0,0,.10));
  transform: translateY(-10px);

  animation:
    confettiFall 1.15s var(--easeOut, cubic-bezier(.16,1,.3,1)) forwards,
    confettiSpin 1.05s linear infinite,
    confettiDrift 1.15s var(--easeInOut, cubic-bezier(.65,0,.35,1)) infinite;
}

@keyframes confettiFall{
  to{
    transform: translateY(120vh);
    opacity: 0;
  }
}

@keyframes confettiSpin{
  from{ rotate: 0deg; }
  to  { rotate: 360deg; }
}

/* Subtle horizontal drift for “premium” float */
@keyframes confettiDrift{
  0%   { translate: 0 0; }
  50%  { translate: 10px 0; }
  100% { translate: 0 0; }
}

/* =========================
   Swipe helpers (gestures.js)
   NOTE: We keep them here for compatibility, even if also in components.css.
   If you see conflicts, we can remove duplicates later.
========================= */
.noSelect, .noSelect *{
  user-select: none !important;
}

.item.swipeLift{
  filter: drop-shadow(0 14px 24px rgba(0,0,0,.14));
}

.item.revealRight{
  background:
    radial-gradient(520px 180px at 0% 50%, rgba(34,197,94,.14), transparent 62%),
    linear-gradient(90deg, rgba(34,197,94,.10), rgba(255,255,255,0) 55%),
    rgba(255,255,255,.82);
}

.item.revealLeft{
  background:
    radial-gradient(520px 180px at 100% 50%, rgba(239,68,68,.14), transparent 62%),
    linear-gradient(270deg, rgba(239,68,68,.10), rgba(255,255,255,0) 55%),
    rgba(255,255,255,.82);
}

/* Commit states (optional if your JS uses them) */
.item.swipeCommitRight{
  background:
    radial-gradient(620px 220px at 0% 50%, rgba(34,197,94,.18), transparent 62%),
    linear-gradient(90deg, rgba(34,197,94,.14), rgba(255,255,255,0) 62%),
    rgba(255,255,255,.82);
}

.item.swipeCommitLeft{
  background:
    radial-gradient(620px 220px at 100% 50%, rgba(239,68,68,.18), transparent 62%),
    linear-gradient(270deg, rgba(239,68,68,.14), rgba(255,255,255,0) 62%),
    rgba(255,255,255,.82);
}

.item.swipeRemove{
  transition:
    height 180ms var(--easeOut, cubic-bezier(.16,1,.3,1)),
    margin 180ms var(--easeOut, cubic-bezier(.16,1,.3,1)),
    padding 180ms var(--easeOut, cubic-bezier(.16,1,.3,1)),
    opacity 180ms var(--easeOut, cubic-bezier(.16,1,.3,1)),
    transform 180ms var(--easeOut, cubic-bezier(.16,1,.3,1));
  opacity: 0;
  transform: scale(.99);
  height: 0 !important;
  margin: 0 !important;
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  overflow: hidden;
}
